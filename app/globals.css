@import "tailwindcss";

@plugin "@tailwindcss/typography";
@theme {
    --font-sans: "Figtree";
    --font-mono: "IBM Plex Mono";

    /* Accent (blue based) */
    --color-paradise-100: #E8E3E3;
    --color-paradise-200: #B8C5D4;
    --color-paradise-300: #8DA3B9;
    --color-paradise-400: #7B93AA;
    --color-paradise-500: #6A8299;
    --color-paradise-600: #5A7088;
    --color-paradise-700: #4A5E72;
    --color-paradise-800: #2A3A48;
    --color-paradise-900: #1E2A35;

    /* Other colors */
    --color-paradise-fg: #E8E3E3;
    --color-paradise-bg: #151515;
    --color-paradise-red: #B66467;
    --color-paradise-green: #8C977D;
    --color-paradise-yellow: #D9BC8C;
    --color-paradise-blue: #8DA3B9;
    --color-paradise-magenta: #A988B0;
    --color-paradise-cyan: #8AA6A2;
}

/* --- Base --- */
html {
    @apply bg-paradise-bg text-paradise-fg -z-50;
}

/* --- Keyframes --- */
@keyframes scrollText {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(calc(-1 * var(--text-width)));
    }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pageIn {
  from {
    transform: translateY(6px);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes fadeInStaggered {
  0% {
    opacity: 0;
    transform: translateY(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* --- Animation utilities --- */
.animate-scroll-text {
    animation: scrollText;
}

.animate-page-in {
    animation: pageIn 0.35s ease-out both;
}

.animate-page-in > :where(*) {
    animation: fadeIn 0.35s ease-out both;
}

.animate-stagger-in {
    animation: fadeInUp 0.4s ease-out both;
}

/* --- Prose reveal --- */
.prose-reveal-item {
    opacity: 0;
    filter: blur(10px);
    transform: translateY(24px);
    transition:
        opacity 0.65s ease-out,
        filter 0.65s ease-out,
        transform 0.65s ease-out;
}

.prose-reveal-item.prose-reveal-item--revealed {
    opacity: 1;
    filter: blur(0);
    transform: translateY(0);
}

/* --- Effects --- */
.ambilight {
    filter: url(#ambilight);
}

/* --- Prose typography --- */
.prose blockquote {
    @apply ml-2 border-l-[1px] font-light border-[#424242] not-italic;
}

.prose a {
    @apply text-paradise-300 hover:text-paradise-200 transition-all decoration-[#424242] decoration-1 underline-offset-2;
}

.a {
    @apply text-paradise-300 hover:text-paradise-200 transition-all decoration-[#424242] decoration-1 underline-offset-2;
}

.prose p,
.prose li {
    @apply text-neutral-300 mt-0;
}

.prose strong {
    @apply font-medium;
}

.prose blockquote strong {
    @apply font-semibold;
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
    @apply font-medium mb-4;
}

/* --- Prose code --- */
.prose pre,
.prose code,
pre,
code,
[data-rehype-pretty-code-fragment] {
    font-family: var(--font-jetbrains-mono), ui-monospace, monospace;
}

.prose pre {
    @apply border-0 p-0 m-0 rounded-lg bg-transparent;
    text-wrap: balance;
}

.prose figcaption + pre {
    @apply rounded-t-none;
}

.prose figure code {
    @apply px-4 py-3 border-2 border-[#333333];
}

.prose code {
    @apply border-2 border-[#333333] rounded-md px-0.5;
}

.prose pre code {
    border: initial;
}

pre {
    --tw-shadow-color: #0e1d1dc0;
    --tw-shadow: 0 2px 2px -0px rgb(0 0 0 / 0.1),
        0 8px 10px -6px rgb(0 0 0 / 0.1);
    --tw-shadow-colored: 0 2px 2px -0px var(--tw-shadow-color),
        0 8px 10px -6px var(--tw-shadow-color);
    box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000),
        var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);

    --tw-shadow: var(--tw-shadow-colored);
    @apply shadow-black/50;
}

/* --- Tables --- */
table {
    display: block;
    max-width: fit-content;
    overflow-x: auto;
    white-space: nowrap;
}

/* --- Prose first-child --- */
.prose > :first-child {
    margin-top: 1.25em !important;
    margin-bottom: 1.25em !important;
}

/* --- Rehype Pretty Code --- */
[data-rehype-pretty-code-fragment] .line {
    @apply py-2;
}
[data-rehype-pretty-code-fragment] [data-line-numbers] > .line::before {
    counter-increment: line;
    content: counter(line);
    display: inline-block;
    width: 1rem;
    margin-right: 1rem;
    text-align: right;
    color: gray;
}

[data-rehype-pretty-code-fragment] .line-highlighted span {
    @apply relative;
}
[data-rehype-pretty-code-fragment] .word--highlighted {
    @apply rounded-md bg-slate-500/10 p-1;
}
[data-rehype-pretty-code-title] {
    @apply px-4 py-3 font-mono text-xs font-medium border rounded-lg rounded-b-none text-neutral-200 border-[#333333] bg-[#1c1c1c];
}

/* --- Shiki theme --- */
code[data-theme*=" "],
code[data-theme*=" "] span {
    color: var(--shiki-dark);
    background-color: var(--shiki-dark-bg);
}
